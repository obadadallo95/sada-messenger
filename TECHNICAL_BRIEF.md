# ğŸ“‹ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªÙ‚Ù†ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„ - ØªØ·Ø¨ÙŠÙ‚ Sada (ØµØ¯Ù‰)

**ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø±ÙŠØ±:** 2025-01-XX  
**Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 1.0.0 (Alpha)  
**Ø§Ù„Ù…Ø·ÙˆØ±:** Obada Dallo (Ø¹Ø¨Ø§Ø¯Ø© Ø¯Ù„Ù„Ùˆ)

---

## ğŸ¯ 1. Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© (Overview)

### ÙÙƒØ±Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
**Sada (ØµØ¯Ù‰)** Ù‡Ùˆ ØªØ·Ø¨ÙŠÙ‚ Ù…Ø±Ø§Ø³Ù„Ø© Ù„Ø§Ù…Ø±ÙƒØ²ÙŠ ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªÙ‚Ù†ÙŠØ§Øª **Mesh Networking** Ø¹Ø¨Ø± **WiFi Direct** Ùˆ **Bluetooth LE**. Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…ØµÙ…Ù… Ø®ØµÙŠØµØ§Ù‹ Ù„Ù„Ù…Ø¬ØªÙ…Ø¹Ø§Øª ÙÙŠ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„ØªÙŠ ØªØ¹Ø§Ù†ÙŠ Ù…Ù† Ø§Ù†Ù‚Ø·Ø§Ø¹ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ø£Ùˆ Ø§Ù„Ø±Ù‚Ø§Ø¨Ø©ØŒ Ù…Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø³ÙˆØ±ÙŠØ§ ÙƒØ­Ø§Ù„Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ø¦ÙŠØ³ÙŠØ©.

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ØªÙŠ ÙŠØ­Ù„Ù‡Ø§
- **Ø§Ù†Ù‚Ø·Ø§Ø¹ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª:** ÙŠÙˆÙØ± Ø§ØªØµØ§Ù„Ø§Ù‹ Ø¨Ø¯ÙŠÙ„Ø§Ù‹ Ø¹Ù†Ø¯ Ø§Ù†Ù‚Ø·Ø§Ø¹ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© Ù„Ù„Ø¥Ù†ØªØ±Ù†Øª
- **Ø§Ù„Ø±Ù‚Ø§Ø¨Ø© ÙˆØ§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©:** Ø´Ø¨ÙƒØ© Ù„Ø§Ù…Ø±ÙƒØ²ÙŠØ© Ø¨Ø¯ÙˆÙ† Ø®ÙˆØ§Ø¯Ù… Ù…Ø±ÙƒØ²ÙŠØ© ÙŠÙ…ÙƒÙ† Ù…Ø±Ø§Ù‚Ø¨ØªÙ‡Ø§
- **Ø§Ù„Ø£Ù…Ø§Ù† ÙÙŠ Ø§Ù„Ø¨ÙŠØ¦Ø§Øª Ø§Ù„Ù…Ø¹Ø§Ø¯ÙŠØ©:** ØªØ´ÙÙŠØ± Ù…Ù† Ø·Ø±Ù Ø¥Ù„Ù‰ Ø·Ø±Ù Ù…Ø¹ ÙˆØ¶Ø¹ Ø§Ù„Ø¥ÙƒØ±Ø§Ù‡ (Duress Mode) Ù„Ù„Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„ØªÙØªÙŠØ´ Ø§Ù„Ù‚Ø³Ø±ÙŠ
- **Ø§Ù„ØªÙˆØ§ØµÙ„ ÙÙŠ Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø·ÙˆØ§Ø±Ø¦:** ÙŠØ¹Ù…Ù„ ÙÙŠ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù†Ø§Ø¦ÙŠØ© Ø£Ùˆ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒÙˆØ§Ø±Ø« Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©

### Ø§Ù„ÙØ¦Ø© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ© (Target Audience)
- **Ø§Ù„Ù…Ø¬ØªÙ…Ø¹Ø§Øª ÙÙŠ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù†Ø§Ø¦ÙŠØ©:** Ø³ÙˆØ±ÙŠØ§ ÙˆØ§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„ØªÙŠ ØªØ¹Ø§Ù†ÙŠ Ù…Ù† Ø§Ù†Ù‚Ø·Ø§Ø¹ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
- **Ø§Ù„Ù†Ø´Ø·Ø§Ø¡ ÙˆØ§Ù„ØµØ­ÙÙŠÙŠÙ†:** ÙŠØ­ØªØ§Ø¬ÙˆÙ† Ø§ØªØµØ§Ù„Ø§Ù‹ Ø¢Ù…Ù†Ø§Ù‹ ÙÙŠ Ø§Ù„Ø¨ÙŠØ¦Ø§Øª Ø§Ù„Ù…Ø¹Ø§Ø¯ÙŠØ©
- **Ø§Ù„Ù…Ù†Ø¸Ù…Ø§Øª Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠØ©:** Ø§Ù„ØªÙˆØ§ØµÙ„ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒÙˆØ§Ø±Ø« Ø£Ùˆ ÙÙŠ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù…Ø­Ø±ÙˆÙ…Ø©
- **Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„Ù…Ù‡ØªÙ…ÙˆÙ† Ø¨Ø§Ù„Ø®ØµÙˆØµÙŠØ©:** ÙŠÙØ¶Ù„ÙˆÙ† Ø­Ù„ÙˆÙ„ Ù„Ø§Ù…Ø±ÙƒØ²ÙŠØ© Ø¨Ø¯ÙˆÙ† Ø®ÙˆØ§Ø¯Ù…

### Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ© (Value Proposition)
- âœ… **100% Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª:** ÙŠØ¹Ù…Ù„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¹Ø¨Ø± WiFi Direct Ùˆ Bluetooth
- âœ… **ØªØ´ÙÙŠØ± Ù‚ÙˆÙŠ:** X25519 + XSalsa20-Poly1305 (libsodium)
- âœ… **ÙˆØ¶Ø¹ Ø§Ù„Ø¥ÙƒØ±Ø§Ù‡:** Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„ØªÙØªÙŠØ´ Ø§Ù„Ù‚Ø³Ø±ÙŠ (Plausible Deniability)
- âœ… **Store-Carry-Forward:** Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ØªÙ†ØªÙ‚Ù„ Ø¹Ø¨Ø± Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…ØªÙˆØ³Ø·Ø©
- âœ… **Ù…ÙØªÙˆØ­ Ø§Ù„Ù…ØµØ¯Ø±:** Ø´ÙØ§ÙÙŠØ© ÙƒØ§Ù…Ù„Ø© ÙÙŠ Ø§Ù„ÙƒÙˆØ¯

---

## ğŸ—ï¸ 2. Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠ (Technical Stack)

### Ù„ØºØ§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© ÙˆØ§Ù„Ø£Ø·Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©

#### Frontend Framework
- **Flutter:** 3.10.4+
- **Dart:** 3.10.4+
- **Material 3:** Ù†Ø¸Ø§Ù… Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø­Ø¯ÙŠØ«

#### State Management
- **Riverpod:** 2.6.1 (Ù…Ø¹ Code Generation)
  - `riverpod_annotation`: 2.6.1
  - `riverpod_generator`: 2.6.4
- **Pattern:** Provider-based reactive state management

#### Navigation
- **GoRouter:** 17.1.0
  - Declarative routing
  - ShellRoute Ù„Ù„Ù€ BottomNavBar
  - Deep linking support

### Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ù€ Backend

#### Database
- **Drift:** 2.18.0 (SQLite ORM)
  - Type-safe database queries
  - Code generation
  - Migration support
- **SQLite:** Local database
  - `sqlite3_flutter_libs`: 0.5.20
- **Database Files:**
  - `sada_encrypted.sqlite` (Master Mode)
  - `sada_dummy.sqlite` (Duress Mode)

#### Backend Architecture
- **Offline-First:** Ù„Ø§ ÙŠÙˆØ¬Ø¯ backend server
- **P2P Networking:** WiFi Direct + Bluetooth LE
- **Native Android Bridge:** Kotlin Ù„Ù„Ù€ WiFi Direct

### Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© Ø§Ù„Ù…Ù‡Ù…Ø© (Dependencies)

#### Security & Cryptography
```yaml
flutter_secure_storage: ^10.0.0    # Android Keystore
crypto: ^3.0.6                      # Cryptographic utilities
sodium_libs: ^2.0.0                # libsodium (X25519, XSalsa20-Poly1305)
local_auth: ^3.0.0                 # Biometric authentication
uuid: ^4.5.1                       # UUID generation
```

#### Networking & Mesh
```yaml
mobile_scanner: ^7.1.4             # QR Code scanning
qr_flutter: ^4.1.0                 # QR Code generation
permission_handler: ^12.0.1        # Runtime permissions
```

#### UI/UX
```yaml
flex_color_scheme: ^8.4.0          # Theme management
google_fonts: ^6.2.1               # Typography (Poppins)
flutter_screenutil: ^5.9.3         # Responsive design
smooth_page_indicator: ^2.0.1      # Page indicators
animate_do: ^4.2.0                 # Animations
flutter_animate: ^4.5.0            # Advanced animations
showcaseview: ^5.0.1               # Feature discovery tour
```

#### Storage & Persistence
```yaml
shared_preferences: ^2.3.3         # App preferences
path_provider: ^2.1.4              # File system paths
```

#### Notifications & Background
```yaml
flutter_local_notifications: ^20.0.0  # Local notifications
timezone: ^0.10.1                     # Timezone handling
flutter_background_service: ^5.0.5    # Background service
flutter_background_service_android: ^6.0.0
android_alarm_manager_plus: ^5.0.0
```

#### Media & Files
```yaml
image_picker: ^1.1.2               # Image selection
flutter_image_compress: ^2.3.0     # Image compression
cached_network_image: ^3.4.1       # Image caching
lottie: ^3.3.2                     # Lottie animations
```

#### Localization
```yaml
intl: ^0.20.2                      # Internationalization
flutter_localizations: SDK         # Flutter localization
```

#### Utilities
```yaml
logger: ^2.4.0                     # Logging
package_info_plus: ^9.0.0          # App info
url_launcher: ^6.3.1               # URL launching
share_plus: ^12.0.1                # Sharing
device_info_plus: ^12.3.0          # Device information
flash: ^3.0.0                      # Flash messages
flutter_markdown: ^0.6.18          # Markdown rendering
```

### Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª (Folder Structure)

```
lib/
â”œâ”€â”€ app.dart                        # App entry point
â”œâ”€â”€ main.dart                       # Main function
â”œâ”€â”€ core/                           # Core functionality
â”‚   â”œâ”€â”€ constants/                  # App constants
â”‚   â”œâ”€â”€ database/                   # Database layer
â”‚   â”‚   â”œâ”€â”€ app_database.dart       # Main database class
â”‚   â”‚   â”œâ”€â”€ database_provider.dart  # Database provider
â”‚   â”‚   â””â”€â”€ tables/                 # Database tables
â”‚   â”‚       â”œâ”€â”€ contacts_table.dart
â”‚   â”‚       â”œâ”€â”€ chats_table.dart
â”‚   â”‚       â”œâ”€â”€ messages_table.dart
â”‚   â”‚       â””â”€â”€ relay_queue_table.dart
â”‚   â”œâ”€â”€ localization/               # Localization
â”‚   â”œâ”€â”€ models/                     # Core models
â”‚   â”œâ”€â”€ network/                    # Mesh networking
â”‚   â”‚   â”œâ”€â”€ discovery_service.dart
â”‚   â”‚   â”œâ”€â”€ mesh_service.dart
â”‚   â”‚   â”œâ”€â”€ mesh_channel.dart
â”‚   â”‚   â”œâ”€â”€ mesh_connection_manager.dart
â”‚   â”‚   â””â”€â”€ protocols/
â”‚   â”œâ”€â”€ power/                      # Power management
â”‚   â”œâ”€â”€ router/                     # Navigation
â”‚   â”‚   â”œâ”€â”€ app_router.dart
â”‚   â”‚   â””â”€â”€ routes.dart
â”‚   â”œâ”€â”€ security/                   # Security & encryption
â”‚   â”‚   â”œâ”€â”€ encryption_service.dart
â”‚   â”‚   â”œâ”€â”€ key_manager.dart
â”‚   â”‚   â””â”€â”€ security_providers.dart
â”‚   â”œâ”€â”€ services/                   # Core services
â”‚   â”‚   â”œâ”€â”€ auth_service.dart
â”‚   â”‚   â”œâ”€â”€ biometric_service.dart
â”‚   â”‚   â”œâ”€â”€ notification_service.dart
â”‚   â”‚   â””â”€â”€ background_service.dart
â”‚   â”œâ”€â”€ theme/                      # Theming
â”‚   â”œâ”€â”€ utils/                      # Utilities
â”‚   â””â”€â”€ widgets/                    # Reusable widgets
â”œâ”€â”€ features/                       # Feature modules
â”‚   â”œâ”€â”€ auth/                       # Authentication
â”‚   â”œâ”€â”€ chat/                       # Chat functionality
â”‚   â”‚   â”œâ”€â”€ application/            # Controllers
â”‚   â”‚   â”œâ”€â”€ data/                   # Repositories
â”‚   â”‚   â”œâ”€â”€ domain/                 # Models
â”‚   â”‚   â””â”€â”€ presentation/            # UI
â”‚   â”œâ”€â”€ contacts/                   # Contacts management
â”‚   â”œâ”€â”€ groups/                     # Groups feature
â”‚   â”œâ”€â”€ home/                       # Home screen
â”‚   â”œâ”€â”€ mesh/                       # Mesh debug
â”‚   â”œâ”€â”€ notifications/              # Notifications
â”‚   â”œâ”€â”€ onboarding/                 # Onboarding
â”‚   â”œâ”€â”€ profile/                    # Profile
â”‚   â”œâ”€â”€ settings/                   # Settings
â”‚   â”œâ”€â”€ splash/                     # Splash screen
â”‚   â””â”€â”€ ...
â””â”€â”€ l10n/                           # Localization files
    â”œâ”€â”€ app_ar.arb                  # Arabic
    â”œâ”€â”€ app_en.arb                  # English
    â””â”€â”€ generated/                  # Generated files
```

---

## ğŸ“± 3. Ø§Ù„ØµÙØ­Ø§Øª ÙˆØ§Ù„Ø´Ø§Ø´Ø§Øª (Pages & Screens)

### 3.1. ØµÙØ­Ø§Øª Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ÙˆØ§Ù„ØªÙ‡ÙŠØ¦Ø©

#### Splash Screen (`/splash`)
- **Route:** `AppRoutes.splash`
- **Ø§Ù„ØºØ±Ø¶:** Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ù…Ø¹ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
- **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:**
  - Logo animation (Fade + Scale)
  - Gradient background
- **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
  - ÙŠØªØ­Ù‚Ù‚ Ù…Ù† `AuthStatus` (loggedIn/notLoggedIn)
  - ÙŠØªØ­Ù‚Ù‚ Ù…Ù† `OnboardingStatus`
- **Ø§Ù„ØªÙˆØ¬ÙŠÙ‡:**
  - Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ â†’ `/register`
  - Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ â†’ `/lock` Ø£Ùˆ `/home`
  - Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ…Ù„ Onboarding â†’ `/onboarding`
- **Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø§ÙØ©:**
  - âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ timeout handling Ù„Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø·ÙˆÙŠÙ„Ø©

#### Onboarding Screen (`/onboarding`)
- **Route:** `AppRoutes.onboarding`
- **Ø§Ù„ØºØ±Ø¶:** ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
- **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:**
  - `OnboardingSlide` (3 slides)
  - `SmoothPageIndicator`
  - Skip button
- **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
  - ÙŠØ®Ø²Ù† `onboardingCompleted` ÙÙŠ SharedPreferences
- **Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø§ÙØ©:**
  - âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ù„Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø®Ù„Ù

#### Register Screen (`/register`)
- **Route:** `AppRoutes.register`
- **Ø§Ù„ØºØ±Ø¶:** ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯
- **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:**
  - Form fields (Display Name)
  - Profile picture picker
  - Security note
  - Register button
- **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
  - `displayName` (String)
  - `profilePicture` (Base64 image)
  - `userId` (generated from device hash + display name)
- **Ø§Ù„ØªØ­Ù‚Ù‚:**
  - âœ… Form validation
  - âœ… Error handling
- **Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø§ÙØ©:**
  - âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Terms of Service checkbox
  - âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Privacy Policy link

#### Lock Screen (`/lock`)
- **Route:** `AppRoutes.lock`
- **Ø§Ù„ØºØ±Ø¶:** Ù‚ÙÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ø¨ÙŠÙˆÙ…ØªØ±ÙŠØ© Ø£Ùˆ PIN
- **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:**
  - Biometric authentication button
  - PIN pad (6 digits)
  - Duress PIN support
- **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
  - `AuthType` (Master/Duress)
  - `PIN` (encrypted in FlutterSecureStorage)
- **Ø§Ù„Ù…Ù†Ø·Ù‚:**
  - Ø¥Ø°Ø§ ÙƒØ§Ù† PIN = Master PIN â†’ `AuthType.master` â†’ `sada_encrypted.sqlite`
  - Ø¥Ø°Ø§ ÙƒØ§Ù† PIN = Duress PIN â†’ `AuthType.duress` â†’ `sada_dummy.sqlite`
- **Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø§ÙØ©:**
  - âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ retry limit Ù„Ù„Ù€ Biometric
  - âœ… Database initialization Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ AuthType

### 3.2. Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Ù…Ø¹ BottomNavBar)

#### Home Screen (`/home`)
- **Route:** `AppRoutes.home`
- **Ø§Ù„ØºØ±Ø¶:** Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù…Ø¹ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©
- **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:**
  - `SliverAppBar` (Material 3)
  - `FAB Speed Dial` (Add Friend, Create Group)
  - Mesh status indicator
  - Quick actions
- **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
  - Mesh connection status
  - Nearby peers count
- **Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø§ÙØ©:**
  - âœ… Responsive design
  - âœ… RTL support

#### Chat Page (`/chat`)
- **Route:** `AppRoutes.chat`
- **Ø§Ù„ØºØ±Ø¶:** Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª
- **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:**
  - `ChatTile` / `GlassChatTile`
  - Search bar
  - Empty state
- **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
  - `List<ChatModel>` Ù…Ù† `ChatRepository`
  - Stream-based updates
- **Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø§ÙØ©:**
  - âœ… Real-time updates
  - âœ… Unread message count

#### Chat Details Screen (`/chat/:chatId`)
- **Route:** `AppRoutes.chat/:chatId`
- **Ø§Ù„ØºØ±Ø¶:** Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„ÙØ±Ø¯ÙŠØ©
- **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:**
  - `MessageBubble` (sent/received)
  - Message input field
  - Send button
- **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
  - `ChatModel` (passed via `state.extra`)
  - `List<MessageModel>` (stream from database)
- **Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø§ÙØ©:**
  - âœ… Message encryption Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
  - âœ… Message decryption Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„
  - âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ message status indicators (sent/delivered/read)

#### Groups Screen (`/groups`)
- **Route:** `AppRoutes.groups`
- **Ø§Ù„ØºØ±Ø¶:** Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ù‚Ø±ÙŠØ¨Ø©
- **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:**
  - Radar-style UI
  - Group cards
  - Create group button
- **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
  - `List<GroupModel>` Ù…Ù† `GroupsRepository`
- **Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø§ÙØ©:**
  - âœ… Group discovery via mesh
  - âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ group member management UI

#### Create Group Screen (`/create_group`)
- **Route:** `AppRoutes.createGroup`
- **Ø§Ù„ØºØ±Ø¶:** Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø¬Ø¯ÙŠØ¯Ø©
- **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:**
  - Group name input
  - Group description
  - Privacy settings (Public/Private)
  - Create button
- **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
  - `groupName` (String)
  - `description` (String)
  - `isPublic` (bool)
- **Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø§ÙØ©:**
  - âœ… Local group storage
  - âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ group member invitation UI

#### Add Friend Screen (`/add_friend`)
- **Route:** `AppRoutes.addFriend`
- **Ø§Ù„ØºØ±Ø¶:** Ø¥Ø¶Ø§ÙØ© ØµØ¯ÙŠÙ‚ Ø¬Ø¯ÙŠØ¯
- **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:**
  - QR Scanner button
  - Manual entry (future)
- **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
  - QR code data (JSON with userId + publicKey)
- **Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø§ÙØ©:**
  - âœ… QR code validation
  - âœ… Contact deduplication

#### Scan QR Screen (`/scan_qr`)
- **Route:** `AppRoutes.scanQr`
- **Ø§Ù„ØºØ±Ø¶:** Ù…Ø³Ø­ Ø±Ù…Ø² QR Ù„Ø¥Ø¶Ø§ÙØ© ØµØ¯ÙŠÙ‚
- **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:**
  - `MobileScanner` widget
  - Camera permission handling
- **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
  - QR code result (JSON)
  - Parsing: `userId`, `publicKey`, `displayName`
- **Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø§ÙØ©:**
  - âœ… Permission handling
  - âœ… Invalid QR code handling

#### My QR Screen (`/my_qr`)
- **Route:** `AppRoutes.myQr`
- **Ø§Ù„ØºØ±Ø¶:** Ø¹Ø±Ø¶ Ø±Ù…Ø² QR Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
- **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:**
  - `QrImageView` widget
  - Share button
- **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
  - User ID
  - Public key
  - Display name
- **Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø§ÙØ©:**
  - âœ… QR code generation
  - âœ… Share functionality

#### Settings Screen (`/settings`)
- **Route:** `AppRoutes.settings`
- **Ø§Ù„ØºØ±Ø¶:** Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
- **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:**
  - Theme toggle (Dark/Light)
  - Language selector (AR/EN)
  - Biometric lock toggle
  - Power mode selector (High/Balanced/Low)
  - About & Privacy links
- **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
  - Theme preference
  - Locale preference
  - Biometric enabled
  - Power mode
- **Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø§ÙØ©:**
  - âœ… Real-time theme switching
  - âœ… RTL/LTR switching

#### About Screen (`/settings/about`)
- **Route:** `AppRoutes.about`
- **Ø§Ù„ØºØ±Ø¶:** Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
- **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:**
  - App version
  - Developer info
  - License info
- **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
  - `package_info_plus` Ù„Ù„Ù€ version

#### Privacy Screen (`/settings/privacy`)
- **Route:** `AppRoutes.privacy`
- **Ø§Ù„ØºØ±Ø¶:** Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©
- **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:**
  - Markdown content renderer
- **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
  - Static markdown content

#### Mesh Debug Screen (`/mesh_debug`)
- **Route:** `AppRoutes.meshDebug`
- **Ø§Ù„ØºØ±Ø¶:** Ø´Ø§Ø´Ø© debug Ù„Ù„Ù€ mesh networking
- **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:**
  - Connected peers list
  - Message queue status
  - Network topology
- **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
  - Mesh connection status
  - Peer discovery logs
- **Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø§ÙØ©:**
  - âš ï¸ Development-only screen

#### Notifications Screen (`/notifications`)
- **Route:** `AppRoutes.notifications`
- **Ø§Ù„ØºØ±Ø¶:** Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
- **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:**
  - Notification list
  - Clear all button
- **Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**
  - `List<NotificationModel>`
- **Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø§ÙØ©:**
  - âœ… Local notifications support

---

## âš¡ 4. Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Core Features)

### 4.1. Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© âœ…

#### Foundation Layer
- [x] **UI/UX Architecture**
  - Material 3 design system
  - Dark/Light theme support
  - Cyber-Stealth aesthetic (Neo-Glass design)
  - Mesh gradient background animations

- [x] **Navigation System**
  - GoRouter with ShellRoute
  - BottomNavBar persistent navigation
  - Deep linking support
  - Route guards (authentication)

- [x] **Localization**
  - Arabic & English support
  - RTL/LTR switching
  - `flutter_localizations` integration

- [x] **Responsive Design**
  - ScreenUtil-based layouts
  - Adaptive UI for different screen sizes

- [x] **Logging System**
  - Structured logging with `logger` package
  - Log levels (info, warning, error)

#### Authentication & Security
- [x] **Offline Authentication**
  - Device-bound User ID (device hash + display name)
  - No server-side authentication

- [x] **Biometric App Lock**
  - Fingerprint/Face ID support
  - `local_auth` integration
  - Toggle on/off in settings

- [x] **Duress Mode (Plausible Deniability)**
  - Dual PIN system (Master/Duress)
  - Separate database files
  - Identical UI in both modes
  - No visible indicators

- [x] **End-to-End Encryption**
  - X25519 key exchange (ECDH)
  - XSalsa20-Poly1305 authenticated encryption
  - libsodium integration
  - Forward secrecy (session keys)

- [x] **Secure Key Management**
  - Private keys in FlutterSecureStorage (Android Keystore)
  - Public keys in database
  - QR code key exchange

#### Core Features
- [x] **Onboarding Flow**
  - 3-slide introduction
  - Skip functionality
  - Completion tracking

- [x] **Profile Picture Management**
  - Image picker
  - Image compression
  - Base64 storage

- [x] **QR Code Generation & Scanning**
  - QR code generation for contact sharing
  - QR code scanning for adding friends
  - JSON format (userId + publicKey + displayName)

- [x] **Local Notifications**
  - `flutter_local_notifications` integration
  - Notification permissions handling
  - In-app notification display

- [x] **Power Management**
  - Duty cycling for mesh discovery
  - Power modes (High/Balanced/Low)
  - Battery optimization

- [x] **Interactive Feature Discovery Tour**
  - `showcaseview` integration
  - Guided tour for new users

#### Groups
- [x] **Group Creation UI**
  - Create group screen
  - Group name & description
  - Privacy settings

- [x] **Group Discovery Screen**
  - Radar-style UI
  - Nearby groups list

- [x] **Local Group Storage**
  - Groups stored in database
  - Group metadata management

#### Database Layer
- [x] **Drift (SQLite) Integration**
  - Type-safe queries
  - Code generation
  - Migration support

- [x] **Message Persistence**
  - Messages stored locally
  - Encrypted content storage
  - Message status tracking

- [x] **Contact Storage**
  - Contacts table
  - Public key storage
  - Block/unblock functionality

- [x] **Duress Mode Database Separation**
  - `sada_encrypted.sqlite` (Master)
  - `sada_dummy.sqlite` (Duress)

- [x] **Relay Queue (Store-Carry-Forward)**
  - `RelayQueueTable` for mesh routing
  - Message queuing for offline delivery
  - Hop count & TTL tracking

#### Native Android Bridge
- [x] **WiFi Direct (P2P) Discovery**
  - Kotlin implementation
  - MethodChannel & EventChannel setup
  - Peer discovery events

- [x] **Mesh Debug Screen**
  - Connection status display
  - Peer list visualization

### 4.2. Ø§Ù„Ù…ÙŠØ²Ø§Øª ØªØ­Øª Ø§Ù„ØªØ·ÙˆÙŠØ± ğŸš§

- [ ] **Native Mesh Implementation**
  - [ ] Complete WiFi P2P connection management
  - [ ] Bluetooth LE mesh support
  - [ ] Message routing protocol
  - [ ] Network topology management

- [ ] **Message Protocol**
  - [ ] Mesh message format standardization
  - [ ] Multi-hop routing implementation
  - [ ] Message delivery confirmation
  - [ ] Offline message queue processing

### 4.3. Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø®Ø·Ø·Ø© ğŸ“‹

- [ ] **Advanced Features**
  - [ ] File sharing (Images, Documents)
  - [ ] Voice messages
  - [ ] Location sharing
  - [ ] Mesh network map visualization

- [ ] **Testing & Quality**
  - [ ] Unit tests
  - [ ] Integration tests
  - [ ] E2E tests
  - [ ] Security audits

### 4.4. Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© (APIs & Third-party Services)

#### Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙƒØ§Ù…Ù„Ø§Øª Ø®Ø§Ø±Ø¬ÙŠØ©
- âœ… **100% Offline:** Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ¹Ù…Ù„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø®ÙˆØ§Ø¯Ù… Ø®Ø§Ø±Ø¬ÙŠØ©
- âœ… **No Cloud Sync:** Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ©
- âœ… **No Analytics:** Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØªØ¨Ø¹ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- âœ… **No Crash Reporting:** Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¥Ø±Ø³Ø§Ù„ ØªÙ‚Ø§Ø±ÙŠØ± Ø£Ø®Ø·Ø§Ø¡

---

## ğŸ¨ 5. Ø§Ù„ØªØµÙ…ÙŠÙ… ÙˆØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (UI/UX)

### Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„ØªØµÙ…ÙŠÙ… (Color Palette)

#### Cyber-Stealth Color Scheme
```dart
// Primary Colors
Deep Midnight Blue: #050A14      // Background
Semi-Transparent Dark Blue: #101A26  // Surface
Electric Cyan: #00E5FF           // Primary/Accent
Fluorescent Red: #FF1744         // Error

// Material 3 Color Scheme
Primary: Electric Cyan (#00E5FF)
Secondary: Electric Cyan (unified accent)
Error: Fluorescent Red (#FF1744)
Surface: Semi-Transparent Dark Blue (60% opacity)
```

#### Typography
- **Font Family:** Google Fonts - Poppins
- **Base Style:** `GoogleFonts.poppins()`
- **Headings:** Bold, 24px, letter-spacing 0.5
- **Body:** Regular, 16px
- **Buttons:** Semi-bold, 16px, letter-spacing 0.5

### Ø§Ù„ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ (Responsive Design)

- âœ… **ScreenUtil Integration**
  - Design size: 375x812 (iPhone X)
  - `minTextAdapt: true`
  - `splitScreenMode: true`
- âœ… **Adaptive Layouts**
  - Responsive padding/margins
  - Flexible widgets
  - Screen size detection

### Ø¯Ø¹Ù… Ø§Ù„Ù„ØºØ§Øª/Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª (RTL/LTR)

- âœ… **Full RTL Support**
  - Arabic (RTL) & English (LTR)
  - `flutter_localizations` integration
  - Locale switching in settings
  - Text direction auto-detection

#### Localization Files
- `l10n/app_ar.arb` (Arabic)
- `l10n/app_en.arb` (English)
- Generated files in `l10n/generated/`

### Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙØ§Ø¹Ù„ (Animations & Micro-interactions)

#### Animation Libraries
- **flutter_animate:** 4.5.0 (Advanced animations)
- **animate_do:** 4.2.0 (Simple animations)

#### Animation Types
- âœ… **Splash Screen:** Fade + Scale animation
- âœ… **Page Transitions:** Smooth navigation animations
- âœ… **Mesh Gradient Background:** Animated color blobs
- âœ… **Button Interactions:** Ripple effects
- âœ… **List Animations:** Staggered list items

#### Micro-interactions
- âœ… **FAB Speed Dial:** Expandable floating action button
- âœ… **PIN Pad:** Haptic feedback (future)
- âœ… **Message Bubbles:** Slide-in animations
- âœ… **Loading States:** Circular progress indicators

### Design System Components

#### Glassmorphism Effects
- âœ… **Card Theme:** Semi-transparent cards with blur
- âœ… **Border:** 1px white border (10% opacity)
- âœ… **Border Radius:** 24px (consistent)

#### Material 3 Components
- âœ… **NavigationBar:** Bottom navigation (5 tabs)
- âœ… **SliverAppBar:** Collapsible app bar
- âœ… **Cards:** Glassmorphism style
- âœ… **Buttons:** Elevated, Outlined, Text variants

---

## ğŸ”’ 6. Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø£Ø¯Ø§Ø¡ (Security & Performance)

### Ø¢Ù„ÙŠØ© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© (Authentication)

#### Offline Authentication Flow
1. **User Registration:**
   - User enters display name
   - System generates `userId` = hash(deviceId + displayName)
   - Creates key pair (X25519)
   - Stores private key in FlutterSecureStorage
   - Stores public key in database

2. **App Lock:**
   - Biometric authentication (optional)
   - PIN authentication (required)
   - Duress PIN support

3. **Session Management:**
   - `AuthType` (Master/Duress) determines database
   - Session persists until app close
   - Re-authentication on app resume (if biometric enabled)

#### Duress Mode Implementation
```dart
// Master PIN â†’ AuthType.master â†’ sada_encrypted.sqlite
// Duress PIN â†’ AuthType.duress â†’ sada_dummy.sqlite

// No visible difference in UI
// Identical experience in both modes
```

### Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

#### Encryption Stack
- **Key Exchange:** X25519 (Curve25519 ECDH)
- **Encryption:** XSalsa20-Poly1305
- **Hashing:** BLAKE2b (for session key derivation)
- **Library:** libsodium (sodium_libs)

#### Key Management
- **Private Keys:** FlutterSecureStorage (Android Keystore)
- **Public Keys:** Database (encrypted at rest)
- **Session Keys:** Derived per conversation (forward secrecy)

#### Message Encryption Flow
1. Calculate shared secret (ECDH)
2. Derive session key (BLAKE2b hash)
3. Generate random nonce (24 bytes)
4. Encrypt message (XSalsa20-Poly1305)
5. Store: Base64(nonce + ciphertext)

#### Database Security
- **Encryption at Rest:** SQLite encryption (future)
- **Duress Mode:** Separate database files
- **No Cloud Sync:** All data local

### ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©

#### Database Optimization
- âœ… **Indexes:** Primary keys on all tables
- âœ… **Lazy Loading:** Stream-based queries
- âœ… **Pagination:** Limit/offset for message lists
- âœ… **Connection Pooling:** Drift handles connections

#### Memory Management
- âœ… **Image Compression:** `flutter_image_compress`
- âœ… **Cached Images:** `cached_network_image`
- âœ… **Dispose Resources:** Proper cleanup in widgets

#### Network Optimization
- âœ… **Duty Cycling:** Configurable mesh discovery frequency
- âœ… **Power Modes:** High/Balanced/Low performance modes
- âœ… **Background Service:** Efficient foreground service

#### UI Performance
- âœ… **Code Generation:** Riverpod generators reduce runtime overhead
- âœ… **Lazy Loading:** Widgets loaded on demand
- âœ… **Animation Optimization:** Hardware-accelerated animations

---

## ğŸ› 7. Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø¹Ø±ÙˆÙØ© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©

### Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø¹Ø±ÙˆÙØ© (Known Issues)

#### Critical Issues
- âš ï¸ **Mesh Routing:** Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø³ÙŠÙ†
- âš ï¸ **WiFi P2P Connection:** Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§ØªØµØ§Ù„ ØºÙŠØ± Ù…ÙƒØªÙ…Ù„Ø©
- âš ï¸ **Bluetooth LE:** Ø§Ù„Ø¯Ø¹Ù… ØºÙŠØ± Ù…Ø·Ø¨Ù‚ Ø¨Ø¹Ø¯

#### Medium Priority Issues
- âš ï¸ **Splash Screen:** Ù„Ø§ ÙŠÙˆØ¬Ø¯ timeout handling Ù„Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø·ÙˆÙŠÙ„Ø©
- âš ï¸ **Onboarding:** Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ù„Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø®Ù„Ù
- âš ï¸ **Register Screen:** Ù„Ø§ ÙŠÙˆØ¬Ø¯ Terms of Service checkbox
- âš ï¸ **Lock Screen:** Ù„Ø§ ÙŠÙˆØ¬Ø¯ retry limit Ù„Ù„Ù€ Biometric
- âš ï¸ **Message Status:** Ù„Ø§ ÙŠÙˆØ¬Ø¯ indicators (sent/delivered/read)
- âš ï¸ **Group Management:** Ù„Ø§ ÙŠÙˆØ¬Ø¯ UI Ù„Ø¥Ø¯Ø§Ø±Ø© Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©

#### Low Priority Issues
- âš ï¸ **Haptic Feedback:** ØºÙŠØ± Ù…Ø·Ø¨Ù‚ ÙÙŠ PIN pad
- âš ï¸ **Error Messages:** Ø¨Ø¹Ø¶ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ØºÙŠØ± Ù…ØªØ±Ø¬Ù…Ø©
- âš ï¸ **Accessibility:** Ø¯Ø¹Ù… Ù…Ø­Ø¯ÙˆØ¯ Ù„Ù„ÙˆØµÙˆÙ„ÙŠØ©

### Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡

#### Database
- [ ] **Add Indexes:** Ø¹Ù„Ù‰ `chatId` ÙÙŠ `messages_table`
- [ ] **Add Indexes:** Ø¹Ù„Ù‰ `peerId` ÙÙŠ `chats_table`
- [ ] **Query Optimization:** ØªØ­Ø³ÙŠÙ† queries Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©
- [ ] **Database Encryption:** SQLCipher integration

#### Network
- [ ] **Connection Pooling:** ØªØ­Ø³ÙŠÙ† Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª
- [ ] **Message Batching:** ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
- [ ] **Compression:** Ø¶ØºØ· Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ù‚Ø¨Ù„ Ø§Ù„ØªØ´ÙÙŠØ±
- [ ] **Retry Logic:** ØªØ­Ø³ÙŠÙ† Ø¢Ù„ÙŠØ© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©

#### UI/UX
- [ ] **Skeleton Loaders:** Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- [ ] **Optimistic Updates:** ØªØ­Ø¯ÙŠØ«Ø§Øª ÙÙˆØ±ÙŠØ© ÙÙŠ UI
- [ ] **Image Lazy Loading:** ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©
- [ ] **Animation Performance:** ØªØ­Ø³ÙŠÙ† Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©

### Ù…ÙŠØ²Ø§Øª Ù…Ù‚ØªØ±Ø­Ø© Ù„Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ‚Ø¨Ù„Ø§Ù‹

#### Short-term (v1.1)
- [ ] **Message Status Indicators:** sent/delivered/read
- [ ] **Group Member Management:** Ø¥Ø¶Ø§ÙØ©/Ø­Ø°Ù Ø£Ø¹Ø¶Ø§Ø¡
- [ ] **File Sharing:** ØµÙˆØ± ÙˆÙ…Ø³ØªÙ†Ø¯Ø§Øª
- [ ] **Message Search:** Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„

#### Medium-term (v1.2)
- [ ] **Voice Messages:** ØªØ³Ø¬ÙŠÙ„ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„ ØµÙˆØªÙŠØ©
- [ ] **Location Sharing:** Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ
- [ ] **Message Reactions:** ØªÙØ§Ø¹Ù„Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
- [ ] **Message Forwarding:** Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„

#### Long-term (v2.0)
- [ ] **Mesh Network Map:** ØªØµÙˆØ± Ø·ÙˆØ¨ÙˆÙ„ÙˆØ¬ÙŠØ§ Ø§Ù„Ø´Ø¨ÙƒØ©
- [ ] **Multi-device Sync:** (Ù…Ø­Ø¯ÙˆØ¯ - Ø¨Ø¯ÙˆÙ† Ø®ÙˆØ§Ø¯Ù…)
- [ ] **End-to-End Encrypted Groups:** ØªØ´ÙÙŠØ± Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª
- [ ] **Disappearing Messages:** Ø±Ø³Ø§Ø¦Ù„ ØªØ®ØªÙÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

---

## ğŸ“Š 8. Ù…Ø®Ø·Ø· Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Database Schema)

### Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©

#### 1. ContactsTable (Ø¬Ù‡Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„)

```dart
ContactsTable {
  id: String (Primary Key)           // User ID
  name: String (1-100 chars)         // Display name
  publicKey: String? (nullable)      // X25519 public key (Base64)
  avatar: String? (nullable)         // Profile picture (Base64)
  isBlocked: Bool (default: false)   // Block status
  createdAt: DateTime                // Creation timestamp
  updatedAt: DateTime                // Last update timestamp
}
```

**Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª:**
- One-to-Many Ù…Ø¹ `ChatsTable` (via `peerId`)

**Ø§Ù„ÙÙ‡Ø§Ø±Ø³:**
- Primary Key: `id`
- Index on: `name` (for sorting)

#### 2. ChatsTable (Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª)

```dart
ChatsTable {
  id: String (Primary Key)           // Chat ID
  peerId: String? (nullable, FK)    // Contact ID (null for groups)
  name: String? (nullable)           // Group name (for groups)
  lastMessage: String? (nullable)    // Last message preview
  lastUpdated: DateTime              // Last activity timestamp
  isGroup: Bool (default: false)    // Is group chat?
  memberCount: Int (default: 0)      // Group member count
  avatarColor: Int (default: 0xFF0D9488)  // Group avatar color
  createdAt: DateTime                // Creation timestamp
}
```

**Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª:**
- Foreign Key: `peerId` â†’ `ContactsTable.id`
- One-to-Many Ù…Ø¹ `MessagesTable` (via `chatId`)

**Ø§Ù„ÙÙ‡Ø§Ø±Ø³:**
- Primary Key: `id`
- Index on: `peerId` (for lookups)
- Index on: `lastUpdated` (for sorting)

#### 3. MessagesTable (Ø§Ù„Ø±Ø³Ø§Ø¦Ù„)

```dart
MessagesTable {
  id: String (Primary Key)           // Message ID (UUID)
  chatId: String (FK)                // Chat ID
  senderId: String                   // Sender User ID
  content: String                    // Encrypted message (Base64)
  type: String (default: 'text')     // Message type (text/image/voice/file)
  status: String (default: 'sending') // Status (sending/sent/delivered/read/failed)
  timestamp: DateTime                // Message timestamp
  isFromMe: Bool (default: false)   // Is from current user?
  replyToId: String? (nullable)     // Reply to message ID
}
```

**Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª:**
- Foreign Key: `chatId` â†’ `ChatsTable.id`
- Self-reference: `replyToId` â†’ `MessagesTable.id`

**Ø§Ù„ÙÙ‡Ø§Ø±Ø³:**
- Primary Key: `id`
- Index on: `chatId` (for message queries)
- Index on: `timestamp` (for sorting)
- Index on: `status` (for unread count)

**Message Types:**
- `text`: Plain text message
- `image`: Image message
- `voice`: Voice message
- `file`: File/document message

**Message Status:**
- `sending`: Ù‚ÙŠØ¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
- `sent`: ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
- `delivered`: ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…
- `read`: ØªÙ… Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©
- `failed`: ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„

#### 4. RelayQueueTable (Ù‚Ø§Ø¦Ù…Ø© Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ±Ø­ÙŠÙ„)

```dart
RelayQueueTable {
  messageId: String (Primary Key)    // Message ID (UUID)
  originalSenderId: String           // Original sender User ID
  finalDestinationId: String         // Final destination User ID
  encryptedContent: String           // Encrypted message (Base64)
  hopCount: Int (default: 0)         // Current hop count
  maxHops: Int (default: 10)         // Maximum hops (TTL)
  trace: String (default: '[]')      // JSON array of device IDs
  timestamp: DateTime                // Original message timestamp
  type: String? (nullable)           // Message type
  metadata: String? (nullable)       // Additional JSON data
  queuedAt: DateTime                 // Queue timestamp
  retryCount: Int (default: 0)      // Retry attempts
  lastRetryAt: DateTime? (nullable) // Last retry timestamp
}
```

**Ø§Ù„ØºØ±Ø¶:**
- Store-Carry-Forward protocol
- Messages queued for relay to other devices
- TTL tracking (maxHops)
- Retry logic (max 5 retries)

**Ø§Ù„ÙÙ‡Ø§Ø±Ø³:**
- Primary Key: `messageId`
- Index on: `finalDestinationId` (for destination lookups)
- Index on: `queuedAt` (for sorting)
- Index on: `retryCount` (for cleanup)

### Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª Ø¨ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„

```
ContactsTable (1) â”€â”€< (Many) ChatsTable
                           â”‚
                           â”‚ (1)
                           â”‚
                           â”‚ (Many)
                           â–¼
                    MessagesTable
                           â”‚
                           â”‚ (self-reference)
                           â”‚
                           â–¼
                    MessagesTable.replyToId

RelayQueueTable (standalone - no foreign keys)
```

### Ù…Ø®Ø·Ø· Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (ER Diagram)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ContactsTable   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚
â”‚ name            â”‚
â”‚ publicKey       â”‚
â”‚ avatar          â”‚
â”‚ isBlocked       â”‚
â”‚ createdAt       â”‚
â”‚ updatedAt       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ (1:Many)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ChatsTable      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚
â”‚ peerId (FK)     â”‚â”€â”€â”
â”‚ name            â”‚  â”‚
â”‚ lastMessage     â”‚  â”‚
â”‚ lastUpdated     â”‚  â”‚
â”‚ isGroup         â”‚  â”‚
â”‚ memberCount     â”‚  â”‚
â”‚ avatarColor     â”‚  â”‚
â”‚ createdAt       â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â”‚            â”‚
         â”‚ (1:Many)   â”‚
         â”‚            â”‚
         â–¼            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ MessagesTable   â”‚  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ id (PK)         â”‚  â”‚
â”‚ chatId (FK)     â”‚â”€â”€â”˜
â”‚ senderId        â”‚
â”‚ content         â”‚
â”‚ type            â”‚
â”‚ status          â”‚
â”‚ timestamp       â”‚
â”‚ isFromMe        â”‚
â”‚ replyToId (FK)  â”‚â”€â”€â” (self-reference)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                     â”‚
                     â””â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RelayQueueTable â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ messageId (PK)  â”‚
â”‚ originalSenderIdâ”‚
â”‚ finalDestId     â”‚
â”‚ encryptedContentâ”‚
â”‚ hopCount        â”‚
â”‚ maxHops         â”‚
â”‚ trace           â”‚
â”‚ timestamp       â”‚
â”‚ type            â”‚
â”‚ metadata        â”‚
â”‚ queuedAt        â”‚
â”‚ retryCount      â”‚
â”‚ lastRetryAt     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Database Files

#### Master Mode
- **File:** `sada_encrypted.sqlite`
- **Location:** `getApplicationDocumentsDirectory()`
- **Content:** Real user data (contacts, chats, messages)

#### Duress Mode
- **File:** `sada_dummy.sqlite`
- **Location:** `getApplicationDocumentsDirectory()`
- **Content:** Dummy data (fake contacts, fake chats, fake messages)

### Migration Strategy

#### Schema Version: 3
- **Version 1:** Initial schema (Contacts, Chats, Messages)
- **Version 2:** Added fields (no table recreation)
- **Version 3:** Added RelayQueueTable for Store-Carry-Forward

#### Migration Logic
```dart
onUpgrade: (Migrator m, int from, int to) async {
  if (from < 2) {
    // Schema 1 â†’ 2: No table recreation needed
  }
  if (from < 3) {
    // Schema 2 â†’ 3: Add RelayQueueTable
    await m.createTable(relayQueueTable);
  }
}
```

---

## ğŸ“ Ù…Ù„Ø®Øµ Ø§Ù„ØªÙ†ÙÙŠØ°

### Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: **Alpha (v1.0.0)**

#### âœ… Ø§Ù„Ù…ÙƒØªÙ…Ù„
- Foundation layer (UI, Navigation, Localization)
- Authentication & Security (Duress Mode, E2E Encryption)
- Core features (Onboarding, Profile, QR Codes)
- Database layer (Drift, Tables, Migrations)
- Groups UI (Creation, Discovery)
- Native Android bridge (WiFi Direct discovery)

#### ğŸš§ Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±
- Mesh networking implementation
- Message routing protocol
- Bluetooth LE support

#### ğŸ“‹ Ù…Ø®Ø·Ø·
- File sharing
- Voice messages
- Location sharing
- Network map visualization

---

## ğŸ“ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„

**Ø§Ù„Ù…Ø·ÙˆØ±:** Obada Dallo (Ø¹Ø¨Ø§Ø¯Ø© Ø¯Ù„Ù„Ùˆ)  
**GitHub:** [obadadallo95](https://github.com/obadadallo95)  
**LinkedIn:** [Obada Dallo](https://www.linkedin.com/in/obada-dallo-777a47a9/)  
**Telegram:** [@obada_dallo95](https://t.me/obada_dallo95)

---

**ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ØµØ¯Ø±ÙŠ**  
**Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:** 2025-01-XX

